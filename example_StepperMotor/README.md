# Contents
- [🤖`StepperMotor` クラス](#🤖`StepperMotor`-クラス)
    - [⚙️`sinOmega1` 関数](#⚙️`sinOmega1`-関数)
    - [⚙️スレッドの説明](#⚙️スレッドの説明)
    - [⚙️使用方法](#⚙️使用方法)
    - [⚙️実行環境の注意点](#⚙️実行環境の注意点)
- [🤖PCA9685を使用してステッピングモーターを制御する](#🤖PCA9685を使用してステッピングモーターを制御する)


---
# 🤖`StepperMotor` クラス 

このクラスはRaspberry Piとgpiodライブラリを使用してステッピングモーターを制御する．クラスの主な機能は以下の通りである：

- **コンストラクタ (`__init__` メソッド)**: GPIOピンの初期設定を行い，方向ピンとステップピンを初期化する．
- **`start` メソッド**: モーターの初期処理を行う．
- **`dir` メソッド**: モーターの回転方向を設定または取得する．
- **`freq` メソッド**: ステップ周波数を設定または取得する．
- **`set_step_frequency` メソッド**: 指定された周波数でステップパルスを生成する．
- **`accel` メソッド**: 周波数を変更してモーターを加速または減速する．

## ⚙️`sinOmega1` 関数 

この関数は，モーターの周波数をサイン波状に変更するためのスレッド関数である．周波数をサイン波状に変更することで，モーターの回転速度が滑らかに変化する．

## ⚙️スレッドの説明 

このスクリプトでは，Pythonの`threading`モジュールを使用して並行処理を実現している．スレッドを使用することで，モーターの周波数制御をバックグラウンドで実行しつつ，メインプログラムが他のタスクを処理できるようになる．

- **`threading.Thread` クラス**: 新しいスレッドを作成するために使用される．
- **`start` メソッド**: 新しいスレッドでターゲット関数を実行する．

## ⚙️使用方法 

1. スクリプトを実行すると，`StepperMotor` クラスのインスタンスが作成され，モーターの初期設定が行われる．
2. `sinOmega1` 関数が新しいスレッドで実行され，モーターの周波数をサイン波状に変更する．

このスクリプトは，ステッピングモーターのスムーズな回転制御に役立つ．モーターの動作を微調整するには，スクリプト内のパラメータ（例えば，周波数や振幅）を変更することができる．

## ⚙️実行環境の注意点 

1. gpiodライブラリがインストールされていることを確認する．
2. GPIOチップ番号とピン番号は，ハードウェア構成に応じて調整する．

これにより，Raspberry Piを使用したステッピングモーターの制御が効率的に行えるようになる．

[./steppermotor_for_raspi5.py#L1](./steppermotor_for_raspi5.py#L1)

---
# 🤖PCA9685を使用してステッピングモーターを制御する 

PCA9685はパルスを出力するためのデバイスで，サーボモータだけでなくステッピングモータを回転させるパルスの生成にも使える．

TB6600を使って実際に行なった．

TB6600の設定：

SW1: ON
SW2: ON
SW3: OFF
SW4: ON
SW5: OFF
SW6: ON

PCA9685がステッピングモータパルス生成に利用されない理由は，
おそらくパルスの回数をカウントするのが難しいためだろう．

[./stepper_motor_using_PCA9685.py#L1](./stepper_motor_using_PCA9685.py#L1)

---
